(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52049,e=>{"use strict";var a=e.i(48277),s=e.i(30668),t=e.i(91489),l=e.i(96345),r=e.i(83828),i=e.i(96134),n=e.i(85205),d=e.i(75680),c=e.i(44363),o=e.i(1831),h=e.i(5418),x=e.i(74309);let m=async()=>(await o.api.get(o.endpoints.business)).data,u=async(e,a)=>(await o.api.get(o.endpoints.search,{params:{businessId:e,q:a}})).data;function p(){let{data:e=[]}=(0,t.useQuery)({queryKey:h.queryKeys.business,queryFn:m,placeholderData:[]}),o=e[0],[p,y]=(0,s.useState)(""),g=((e,a=300)=>{let[t,l]=(0,s.useState)(e);return(0,s.useEffect)(()=>{let s=window.setTimeout(()=>l(e),a);return()=>window.clearTimeout(s)},[e,a]),t})(p),{data:j=[],isFetching:N}=(0,t.useQuery)({queryKey:h.queryKeys.search(o?.id??"",g),queryFn:()=>u(o.id,g),enabled:!!(o?.id&&g.length>1),placeholderData:[]}),f=(0,s.useMemo)(()=>o?`Search ${o.name}'s posts for “diwali luxury”`:"Select a business to search",[o]);return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-slate-900 dark:text-white",children:"Search posts"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Query your generated content library by emotion, caption text, or hashtags with semantic lookup."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(l.SearchIcon,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),(0,a.jsx)(i.Input,{value:p,onChange:e=>y(e.target.value),placeholder:f,className:"pl-9"})]}),(0,a.jsx)(n.Button,{variant:"outline",onClick:()=>y(""),children:"Clear"})]}),N?(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:Array.from({length:6}).map((e,s)=>(0,a.jsx)(x.Skeleton,{className:"h-60 rounded-2xl"},s))}):(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:[j.map(e=>(0,a.jsxs)(d.Card,{className:"border-slate-200 shadow-sm transition hover:-translate-y-1 hover:shadow-lg dark:border-slate-800",children:[(0,a.jsxs)(d.CardHeader,{children:[(0,a.jsx)(d.CardDescription,{children:(0,r.format)(new Date(e.date),"MMM d, yyyy")}),(0,a.jsx)(d.CardTitle,{className:"text-lg text-slate-900 dark:text-white",children:e.title}),(0,a.jsx)(c.EmotionBadge,{emotion:e.emotion})]}),(0,a.jsxs)(d.CardContent,{className:"space-y-3 text-sm text-slate-600 dark:text-slate-300",children:[(0,a.jsx)("p",{className:"line-clamp-4",children:e.caption}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 text-xs text-blue-600",children:e.hashtags?.map(e=>(0,a.jsxs)("span",{children:["#",e.replace(/^#/,"")]},e))})]})]},e.id)),j.length||!g||N?null:(0,a.jsx)(d.Card,{className:"col-span-full border-dashed text-sm text-slate-500",children:(0,a.jsx)(d.CardContent,{className:"py-10 text-center",children:"No posts matched that query. Try another emotion or keyword."})})]})]})}e.s(["default",()=>p])}]);