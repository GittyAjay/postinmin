(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,68506,e=>{"use strict";let t=(0,e.i(35884).default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["default",()=>t])},75680,e=>{"use strict";var t=e.i(48277),s=e.i(41428);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function a({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...r})}function o({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>o,"CardDescription",()=>n,"CardHeader",()=>a,"CardTitle",()=>i])},91489,e=>{"use strict";let t;var s=e.i(66849),r=e.i(47206),a=e.i(28997),i=e.i(10488),n=e.i(11043),o=e.i(68160),l=e.i(36441),u=class extends i.Subscribable{constructor(e,t){super(),this.options=t,this.#e=e,this.#t=null,this.#s=(0,n.pendingThenable)(),this.bindMethods(),this.setOptions(t)}#e;#r=void 0;#a=void 0;#i=void 0;#n;#o;#s;#t;#l;#u;#c;#d;#h;#p;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#r.addObserver(this),c(this.#r,this.options)?this.#m():this.updateResult(),this.#g())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return d(this.#r,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return d(this.#r,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#b(),this.#r.removeObserver(this)}setOptions(e){let t=this.options,s=this.#r;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,o.resolveEnabled)(this.options.enabled,this.#r))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#r.setOptions(this.options),t._defaulted&&!(0,o.shallowEqualObjects)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#r,observer:this});let r=this.hasListeners();r&&h(this.#r,s,this.options,t)&&this.#m(),this.updateResult(),r&&(this.#r!==s||(0,o.resolveEnabled)(this.options.enabled,this.#r)!==(0,o.resolveEnabled)(t.enabled,this.#r)||(0,o.resolveStaleTime)(this.options.staleTime,this.#r)!==(0,o.resolveStaleTime)(t.staleTime,this.#r))&&this.#v();let a=this.#R();r&&(this.#r!==s||(0,o.resolveEnabled)(this.options.enabled,this.#r)!==(0,o.resolveEnabled)(t.enabled,this.#r)||a!==this.#p)&&this.#j(a)}getOptimisticResult(e){var t,s;let r=this.#e.getQueryCache().build(this.#e,e),a=this.createResult(r,e);return t=this,s=a,(0,o.shallowEqualObjects)(t.getCurrentResult(),s)||(this.#i=a,this.#o=this.options,this.#n=this.#r.state),a}getCurrentResult(){return this.#i}trackResult(e,t){return new Proxy(e,{get:(e,s)=>(this.trackProp(s),t?.(s),"promise"===s&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#s.status||this.#s.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,s))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#r}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),s=this.#e.getQueryCache().build(this.#e,t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#m({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#m(e){this.#x();let t=this.#r.fetch(this.options,e);return e?.throwOnError||(t=t.catch(o.noop)),t}#v(){this.#y();let e=(0,o.resolveStaleTime)(this.options.staleTime,this.#r);if(o.isServer||this.#i.isStale||!(0,o.isValidTimeout)(e))return;let t=(0,o.timeUntilStale)(this.#i.dataUpdatedAt,e);this.#d=l.timeoutManager.setTimeout(()=>{this.#i.isStale||this.updateResult()},t+1)}#R(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#r):this.options.refetchInterval)??!1}#j(e){this.#b(),this.#p=e,!o.isServer&&!1!==(0,o.resolveEnabled)(this.options.enabled,this.#r)&&(0,o.isValidTimeout)(this.#p)&&0!==this.#p&&(this.#h=l.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||s.focusManager.isFocused())&&this.#m()},this.#p))}#g(){this.#v(),this.#j(this.#R())}#y(){this.#d&&(l.timeoutManager.clearTimeout(this.#d),this.#d=void 0)}#b(){this.#h&&(l.timeoutManager.clearInterval(this.#h),this.#h=void 0)}createResult(e,t){let s,r=this.#r,i=this.options,l=this.#i,u=this.#n,d=this.#o,f=e!==r?e.state:this.#a,{state:m}=e,g={...m},y=!1;if(t._optimisticResults){let s=this.hasListeners(),n=!s&&c(e,t),o=s&&h(e,r,t,i);(n||o)&&(g={...g,...(0,a.fetchState)(m.data,e.options)}),"isRestoring"===t._optimisticResults&&(g.fetchStatus="idle")}let{error:b,errorUpdatedAt:x,status:v}=g;s=g.data;let R=!1;if(void 0!==t.placeholderData&&void 0===s&&"pending"===v){let e;l?.isPlaceholderData&&t.placeholderData===d?.placeholderData?(e=l.data,R=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#c?.state.data,this.#c):t.placeholderData,void 0!==e&&(v="success",s=(0,o.replaceData)(l?.data,e,t),y=!0)}if(t.select&&void 0!==s&&!R)if(l&&s===u?.data&&t.select===this.#l)s=this.#u;else try{this.#l=t.select,s=t.select(s),s=(0,o.replaceData)(l?.data,s,t),this.#u=s,this.#t=null}catch(e){this.#t=e}this.#t&&(b=this.#t,s=this.#u,x=Date.now(),v="error");let j="fetching"===g.fetchStatus,Q="pending"===v,C="error"===v,T=Q&&j,w=void 0!==s,S={status:v,fetchStatus:g.fetchStatus,isPending:Q,isSuccess:"success"===v,isError:C,isInitialLoading:T,isLoading:T,data:s,dataUpdatedAt:g.dataUpdatedAt,error:b,errorUpdatedAt:x,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>f.dataUpdateCount||g.errorUpdateCount>f.errorUpdateCount,isFetching:j,isRefetching:j&&!Q,isLoadingError:C&&!w,isPaused:"paused"===g.fetchStatus,isPlaceholderData:y,isRefetchError:C&&w,isStale:p(e,t),refetch:this.refetch,promise:this.#s,isEnabled:!1!==(0,o.resolveEnabled)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=e=>{"error"===S.status?e.reject(S.error):void 0!==S.data&&e.resolve(S.data)},s=()=>{t(this.#s=S.promise=(0,n.pendingThenable)())},a=this.#s;switch(a.status){case"pending":e.queryHash===r.queryHash&&t(a);break;case"fulfilled":("error"===S.status||S.data!==a.value)&&s();break;case"rejected":("error"!==S.status||S.error!==a.reason)&&s()}}return S}updateResult(){let e=this.#i,t=this.createResult(this.#r,this.options);if(this.#n=this.#r.state,this.#o=this.options,void 0!==this.#n.data&&(this.#c=this.#r),(0,o.shallowEqualObjects)(t,e))return;this.#i=t;let s=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,s="function"==typeof t?t():t;if("all"===s||!s&&!this.#f.size)return!0;let r=new Set(s??this.#f);return this.options.throwOnError&&r.add("error"),Object.keys(this.#i).some(t=>this.#i[t]!==e[t]&&r.has(t))};this.#Q({listeners:s()})}#x(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#r)return;let t=this.#r;this.#r=e,this.#a=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#g()}#Q(e){r.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#i)}),this.#e.getQueryCache().notify({query:this.#r,type:"observerResultsUpdated"})})}};function c(e,t){return!1!==(0,o.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&d(e,t,t.refetchOnMount)}function d(e,t,s){if(!1!==(0,o.resolveEnabled)(t.enabled,e)&&"static"!==(0,o.resolveStaleTime)(t.staleTime,e)){let r="function"==typeof s?s(e):s;return"always"===r||!1!==r&&p(e,t)}return!1}function h(e,t,s,r){return(e!==t||!1===(0,o.resolveEnabled)(r.enabled,e))&&(!s.suspense||"error"!==e.state.status)&&p(e,s)}function p(e,t){return!1!==(0,o.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,o.resolveStaleTime)(t.staleTime,e))}e.i(39057);var f=e.i(30668),m=e.i(46592);e.i(48277);var g=f.createContext((t=!1,{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t})),y=f.createContext(!1);y.Provider;var b=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function x(e,t){return function(e,t,s){let a=f.useContext(y),i=f.useContext(g),n=(0,m.useQueryClient)(s),l=n.defaultQueryOptions(e);if(n.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=a?"isRestoring":"optimistic",l.suspense){let e=e=>"static"===e?e:Math.max(e??1e3,1e3),t=l.staleTime;l.staleTime="function"==typeof t?(...s)=>e(t(...s)):e(t),"number"==typeof l.gcTime&&(l.gcTime=Math.max(l.gcTime,1e3))}(l.suspense||l.throwOnError||l.experimental_prefetchInRender)&&!i.isReset()&&(l.retryOnMount=!1),f.useEffect(()=>{i.clearReset()},[i]);let u=!n.getQueryCache().get(l.queryHash),[c]=f.useState(()=>new t(n,l)),d=c.getOptimisticResult(l),h=!a&&!1!==e.subscribed;if(f.useSyncExternalStore(f.useCallback(e=>{let t=h?c.subscribe(r.notifyManager.batchCalls(e)):o.noop;return c.updateResult(),t},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(l)},[l,c]),l?.suspense&&d.isPending)throw b(l,c,i);if((({result:e,errorResetBoundary:t,throwOnError:s,query:r,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(a&&void 0===e.data||(0,o.shouldThrowError)(s,[e.error,r])))({result:d,errorResetBoundary:i,throwOnError:l.throwOnError,query:n.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if(n.getDefaultOptions().queries?._experimental_afterQuery?.(l,d),l.experimental_prefetchInRender&&!o.isServer&&d.isLoading&&d.isFetching&&!a){let e=u?b(l,c,i):n.getQueryCache().get(l.queryHash)?.promise;e?.catch(o.noop).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}(e,u,t)}e.s(["useQuery",()=>x],91489)},5418,e=>{"use strict";e.s(["queryKeys",0,{me:["auth","me"],business:["business"],templates:e=>["templates",e],calendar:e=>["calendar",e],analytics:(e,t)=>["analytics",e,t],search:(e,t)=>["search",e,t],plans:["plans"],posts:e=>["posts",e]}])},37651,e=>{"use strict";var t=e.i(48277),s=e.i(74538),r=e.i(93630),a=e.i(41428);function i({...e}){return(0,t.jsx)(s.Root,{"data-slot":"dialog",...e})}function n({...e}){return(0,t.jsx)(s.Trigger,{"data-slot":"dialog-trigger",...e})}function o({...e}){return(0,t.jsx)(s.Portal,{"data-slot":"dialog-portal",...e})}function l({className:e,...r}){return(0,t.jsx)(s.Overlay,{"data-slot":"dialog-overlay",className:(0,a.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...r})}function u({className:e,children:i,showCloseButton:n=!0,...u}){return(0,t.jsxs)(o,{"data-slot":"dialog-portal",children:[(0,t.jsx)(l,{}),(0,t.jsxs)(s.Content,{"data-slot":"dialog-content",className:(0,a.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...u,children:[i,n&&(0,t.jsxs)(s.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(r.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function c({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,a.cn)("flex flex-col gap-2 text-center sm:text-left",e),...s})}function d({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,a.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...s})}function h({className:e,...r}){return(0,t.jsx)(s.Title,{"data-slot":"dialog-title",className:(0,a.cn)("text-lg leading-none font-semibold",e),...r})}function p({className:e,...r}){return(0,t.jsx)(s.Description,{"data-slot":"dialog-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}e.s(["Dialog",()=>i,"DialogContent",()=>u,"DialogDescription",()=>p,"DialogFooter",()=>d,"DialogHeader",()=>c,"DialogTitle",()=>h,"DialogTrigger",()=>n])},51285,e=>{"use strict";var t=e.i(48277),s=e.i(30668),r=e.i(96086),a=e.i(61305),i=e.i(91489),n=e.i(29244),o=e.i(68506),o=o,l=e.i(54976),u=e.i(75680),c=e.i(85205),d=e.i(41714),h=e.i(37651),p=e.i(1831),f=e.i(36087),m=e.i(5418);let g=async()=>(await p.api.get(p.endpoints.business)).data;function y(){let e=(0,r.useRouter)(),y=(0,f.useAuthStore)(e=>e.user),b=(0,f.useAuthStore)(e=>e.setUser),[x,v]=(0,s.useState)(!1),{data:R=[]}=(0,i.useQuery)({queryKey:m.queryKeys.business,queryFn:g,placeholderData:[]}),j=(0,a.useMutation)({mutationFn:async()=>{await p.api.post(p.endpoints.auth.logout)},onSuccess:()=>{b(null),l.toast.success("Signed out"),e.push("/")},onError:e=>l.toast.error(e instanceof Error?e.message:"Failed to logout"),onSettled:()=>v(!1)}),Q=(y?.name??y?.email??"User").split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase();return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-slate-900 dark:text-white",children:"Settings"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Manage session security, active businesses, and account actions."})]}),(0,t.jsxs)(u.Card,{className:"border-slate-200 shadow-sm dark:border-slate-800",children:[(0,t.jsxs)(u.CardHeader,{className:"flex flex-row items-center gap-4",children:[(0,t.jsx)(d.Avatar,{className:"h-12 w-12 border border-slate-200",children:(0,t.jsx)(d.AvatarFallback,{children:Q})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.CardTitle,{children:y?.name??y?.email}),(0,t.jsx)(u.CardDescription,{children:y?.email})]})]}),(0,t.jsxs)(u.CardContent,{className:"space-y-3 text-sm text-slate-600 dark:text-slate-300",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 dark:border-slate-800 dark:bg-slate-900/50",children:[(0,t.jsx)(o.default,{className:"h-4 w-4 text-blue-600"}),(0,t.jsxs)("span",{children:["Logged in as a ",(0,t.jsx)("span",{className:"font-medium",children:y?.role?.toLowerCase().replace("_"," ")}),"."]})]}),(0,t.jsxs)("p",{children:["You currently manage ",R.length," business",1===R.length?"":"es"," in this workspace."]}),(0,t.jsx)(c.Button,{variant:"outline",className:"border-blue-200 text-blue-600",asChild:!0,children:(0,t.jsx)("a",{href:"/dashboard/plan",children:"Update plan & quotas"})}),(0,t.jsxs)(h.Dialog,{open:x,onOpenChange:v,children:[(0,t.jsxs)(c.Button,{variant:"destructive",onClick:()=>v(!0),disabled:j.isPending,className:"w-full sm:w-auto",children:[j.isPending?(0,t.jsx)(n.LogOutIcon,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(n.LogOutIcon,{className:"mr-2 h-4 w-4"}),"Logout"]}),(0,t.jsxs)(h.DialogContent,{className:"sm:max-w-[420px]",children:[(0,t.jsxs)(h.DialogHeader,{children:[(0,t.jsx)(h.DialogTitle,{children:"Sign out?"}),(0,t.jsx)(h.DialogDescription,{children:"You will need to sign back in to access your businesses and calendar. Any unsaved changes will be lost."})]}),(0,t.jsxs)(h.DialogFooter,{className:"flex flex-col sm:flex-row sm:justify-end sm:space-x-2",children:[(0,t.jsx)(c.Button,{variant:"outline",onClick:()=>v(!1),className:"w-full sm:w-auto",children:"Stay logged in"}),(0,t.jsx)(c.Button,{variant:"destructive",onClick:()=>j.mutate(),disabled:j.isPending,className:"w-full sm:w-auto",children:j.isPending?(0,t.jsx)(n.LogOutIcon,{className:"mr-2 h-4 w-4 animate-spin"}):"Log out"})]})]})]})]})]})]})}e.s(["default",()=>y],51285)}]);