(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,30513,e=>{"use strict";var s=e.i(48277),a=e.i(30668),t=e.i(91489),l=e.i(80380);let r=(0,e.i(35884).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var i=e.i(83828),d=e.i(76786),n=e.i(75680),o=e.i(85205),c=e.i(94900),m=e.i(1831),x=e.i(5418),u=e.i(44363),h=e.i(74309);let p=async()=>(await m.api.get(m.endpoints.business)).data,b=async(e,s=30)=>{var a;if(e)return(await m.api.get(m.endpoints.analytics,{params:{businessId:e,from:(0,i.format)((a=new Date,(0,d.addDays)(a,-s,void 0)),"yyyy-MM-dd")}})).data};function j(){let[e,i]=(0,a.useState)(30),{data:d=[]}=(0,t.useQuery)({queryKey:x.queryKeys.business,queryFn:p,placeholderData:[]}),m=d[0],{data:j,isLoading:y}=(0,t.useQuery)({queryKey:x.queryKeys.analytics(m?.id,String(e)),queryFn:()=>b(m?.id,e),enabled:!!m?.id}),f=(0,a.useMemo)(()=>{if(!j)return null;let e=j.totals._sum.impressions??0,s=j.totals._sum.likes??0,a=j.totals._sum.edits??0;return[{label:"Impressions",value:e.toLocaleString(),trend:"+18.4%"},{label:"Likes",value:s.toLocaleString(),trend:"+6.1%"},{label:"Edits requested",value:a.toLocaleString(),trend:"-3.4%"}]},[j]);return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-slate-900 dark:text-white",children:"Emotion analytics"}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Measure how each emotional tone performs and uncover which templates spark action."})]}),(0,s.jsx)("div",{className:"flex flex-wrap items-center gap-3",children:[7,30,90].map(a=>(0,s.jsxs)(o.Button,{variant:e===a?"default":"outline",className:e===a?"bg-blue-600 text-white hover:bg-blue-700":"border-slate-200",onClick:()=>i(a),children:["Last ",a," days"]},a))}),y||!j?(0,s.jsx)(h.Skeleton,{className:"h-60 rounded-3xl"}):(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-3",children:f?.map(e=>(0,s.jsxs)(n.Card,{className:"border-slate-200 shadow-sm dark:border-slate-800",children:[(0,s.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.CardDescription,{children:e.label}),(0,s.jsx)("div",{className:"rounded-full bg-blue-600/10 p-2 text-blue-600",children:(0,s.jsx)(r,{className:"h-4 w-4"})})]}),(0,s.jsxs)(n.CardContent,{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-2xl font-semibold text-slate-900 dark:text-white",children:e.value}),(0,s.jsxs)("p",{className:"text-xs text-blue-600",children:[e.trend," vs previous period"]})]})]},e.label))}),(0,s.jsxs)(n.Card,{className:"border-slate-200 shadow-sm dark:border-slate-800",children:[(0,s.jsxs)(n.CardHeader,{className:"flex w-full flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(n.CardTitle,{children:"Performance insights"}),(0,s.jsx)(n.CardDescription,{children:"Visualize engagement by emotion and post timeline."})]}),(0,s.jsxs)(o.Button,{variant:"outline",className:"border-blue-200 text-blue-600",onClick:()=>i(30),children:[y?(0,s.jsx)(l.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Refresh insights"]})]}),(0,s.jsx)(n.CardContent,{children:j?(0,s.jsx)(c.AnalyticsCharts,{data:j}):(0,s.jsx)(h.Skeleton,{className:"h-64 rounded-2xl"})})]}),j?.perPost.length?(0,s.jsxs)(n.Card,{className:"border-slate-200 shadow-sm dark:border-slate-800",children:[(0,s.jsxs)(n.CardHeader,{children:[(0,s.jsx)(n.CardTitle,{children:"Top performing posts"}),(0,s.jsx)(n.CardDescription,{children:"Emotions and templates that produced the strongest uplift."})]}),(0,s.jsx)(n.CardContent,{className:"grid gap-3",children:j.perPost.slice(0,6).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm dark:border-slate-800 dark:bg-slate-900/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(u.EmotionBadge,{emotion:e.postId.split("_")[0]}),(0,s.jsx)("span",{className:"text-slate-600 dark:text-slate-300",children:e.postId})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[(0,s.jsxs)("span",{children:["Impressions: ",e._sum.impressions??0]}),(0,s.jsxs)("span",{children:["Likes: ",e._sum.likes??0]})]})]},e.postId))})]}):null]})}e.s(["default",()=>j],30513)}]);